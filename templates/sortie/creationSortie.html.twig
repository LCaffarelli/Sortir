{% extends 'base.html.twig' %}


{% block title %}{{ parent() }} | Création d'une sortie{% endblock %}

{% block body %}
    <fieldset id="fieldset-creation-sortie">
        <legend>Ma Sortie</legend>
        {{ form_start(sortieForm) }}

        <div>
            {{ form_label(sortieForm.nom) }}
            <div>
                {{ form_errors(sortieForm.nom) }}
                {{ form_widget(sortieForm.nom) }}
            </div>
        </div>
        <div>
            {{ form_label(sortieForm.dateHeureDebut) }}
            <div>
                {{ form_errors(sortieForm.dateHeureDebut) }}
                {{ form_widget(sortieForm.dateHeureDebut) }}
            </div>
        </div>
        <div>
            {{ form_label(sortieForm.duree) }}
            <div>
                {{ form_errors(sortieForm.duree) }}
                {{ form_widget(sortieForm.duree) }}
            </div>
        </div>
        <div>
            {{ form_label(sortieForm.dateLimiteInscription) }}
            <div>
                {{ form_errors(sortieForm.dateLimiteInscription) }}
                {{ form_widget(sortieForm.dateLimiteInscription) }}
            </div>
        </div>
        <div>
            {{ form_label(sortieForm.nbInscriptionsMax) }}
            <div>
                {{ form_errors(sortieForm.nbInscriptionsMax) }}
                {{ form_widget(sortieForm.nbInscriptionsMax) }}
            </div>
        </div>
        <div>
            {{ form_label(sortieForm.infosSortie) }}
            <div>
                {{ form_errors(sortieForm.infosSortie) }}
                {{ form_widget(sortieForm.infosSortie) }}
            </div>
        </div>
        <div>
            {{ form_label(sortieForm.lieu) }}
            <div id="lieu">
                {{ form_widget(sortieForm.lieu) }}
                {{ form_errors(sortieForm.lieu) }}
            </div>

            <section>

            </section>

            <script>
                //événement : choix du lieu
                //document.getElementById('lieu').addEventListener("click", );
                let section = document.querySelector('section')
                let requestURL = 'https://mdn.github.io/learning-area/javascript/oojs/json/superheroes.json';
                let request = new XMLHttpRequest();


                request.open('GET', requestURL);
                request.responseType = 'json';
                request.send();

                request.onload = function () {
                    let ville = request.response;
                    remplissageDiv(ville);

                }

                function remplissageDiv(jsonObj) {
                    let myH3 = document.createElement('h3');
                    myH3.textContent = jsonObj['squadName'];
                    section.appendChild(myH3);
                }

            </script>

        </div>
        <div>
            {{ form_label(sortieForm.inscrire) }}
            {{ form_errors(sortieForm.inscrire) }}
            {{ form_widget(sortieForm.inscrire) }}
        </div>
        <div>
            {{ form_label(sortieForm.cree) }}
            {{ form_widget(sortieForm.cree) }}
        </div>
        <div>
            {{ form_label(sortieForm.publier) }}
            {{ form_widget(sortieForm.publier) }}
        </div>


        {{ form_end(sortieForm) }}
        <button onclick="rtn()">Retour</button>
        <script>
            function rtn() {
                window.history.back();
            }
        </script>
    </fieldset>
{% endblock %}



