{% extends 'base.html.twig' %}


{% block title %}{{ parent() }} | Cr√©ation d'une sortie{% endblock %}

{% block body %}
    <script src="{{ asset('js/creationSortie.js') }}" defer></script>
    <fieldset id="fieldset-creation-sortie">
        <legend>Ma Sortie</legend>
        {{ form_start(sortieForm) }}

        <div>
            {{ form_label(sortieForm.nom) }}
            <div>
                {{ form_errors(sortieForm.nom) }}
                {{ form_widget(sortieForm.nom) }}
            </div>
        </div>
        <div>
            {{ form_label(sortieForm.dateHeureDebut) }}
            <div>
                {{ form_errors(sortieForm.dateHeureDebut) }}
                {{ form_widget(sortieForm.dateHeureDebut) }}
            </div>
        </div>
        <div>
            {{ form_label(sortieForm.duree) }}
            <div>
                {{ form_errors(sortieForm.duree) }}
                {{ form_widget(sortieForm.duree) }}
            </div>
        </div>
        <div>
            {{ form_label(sortieForm.dateLimiteInscription) }}
            <div>
                {{ form_errors(sortieForm.dateLimiteInscription) }}
                {{ form_widget(sortieForm.dateLimiteInscription) }}
            </div>
        </div>
        <div>
            {{ form_label(sortieForm.nbInscriptionsMax) }}
            <div>
                {{ form_errors(sortieForm.nbInscriptionsMax) }}
                {{ form_widget(sortieForm.nbInscriptionsMax) }}
            </div>
        </div>
        <div>
            {{ form_label(sortieForm.infosSortie) }}
            <div>
                {{ form_errors(sortieForm.infosSortie) }}
                {{ form_widget(sortieForm.infosSortie) }}
            </div>
        </div>
        <div>
            {{ form_label(sortieForm.lieu) }}
            <div>
                {{ form_widget(sortieForm.lieu) }}
                {{ form_errors(sortieForm.lieu) }}
            </div>

            {#Affichage dynamique de l'adresse des lieux#}
            <article></article>

        </div>
        <div>
            {{ form_label(sortieForm.inscrire) }}
            {{ form_errors(sortieForm.inscrire) }}
            {{ form_widget(sortieForm.inscrire) }}
        </div>
        <div>
            {{ form_label(sortieForm.cree) }}
            {{ form_widget(sortieForm.cree) }}
        </div>
        <div>
            {{ form_label(sortieForm.publier) }}
            {{ form_widget(sortieForm.publier) }}
        </div>

        {{ form_end(sortieForm) }}
        <div class="btn_retour_crea">
            <a href="{{ path('main_home') }}"><button>Retour</button></a>
        </div>
        <script>
            function rtn() {
                window.history.back();
            }

        {#affichage dynamique des adresses de lieux#}

            const select = document.querySelector("#creation_sortie_lieu");
            select.addEventListener('change', (event) => {
                let id = `${event.target.value}` ;
                let requestURL ='http://localhost/Sortir/public/lieu/'+id;
                let request = new XMLHttpRequest();
                request.open('GET', requestURL);
                request.responseType ='json';
                request.send();
                request.onload = function(){
                    let ville = request.response;
                    remplissageDiv(ville);
                }
            })
        </script>


    </fieldset>
{% endblock %}